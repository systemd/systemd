<?xml version='1.0'?> <!--*-nxml-*-->
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
        "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd">

<!--
  This file is part of systemd.

  Copyright 2010 Lennart Poettering

  systemd is free software; you can redistribute it and/or modify it
  under the terms of the GNU General Public License as published by
  the Free Software Foundation; either version 2 of the License, or
  (at your option) any later version.

  systemd is distributed in the hope that it will be useful, but
  WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
  General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with systemd; If not, see <http://www.gnu.org/licenses/>.
-->

<refentry id="systemd-install">

        <refentryinfo>
                <title>systemd-install</title>
                <productname>systemd</productname>

                <authorgroup>
                        <author>
                                <contrib>Developer</contrib>
                                <firstname>Lennart</firstname>
                                <surname>Poettering</surname>
                                <email>lennart@poettering.net</email>
                        </author>
                </authorgroup>
        </refentryinfo>

        <refmeta>
                <refentrytitle>systemd-install</refentrytitle>
                <manvolnum>1</manvolnum>
        </refmeta>

        <refnamediv>
                <refname>systemd-install</refname>
                <refpurpose>Enable or disable a systemd unit
                definition file</refpurpose>
        </refnamediv>

        <refsynopsisdiv>
                <cmdsynopsis>
                        <command>systemd-install <arg choice="opt" rep="repeat">OPTIONS</arg> <arg choice="plain">enable</arg> <arg choice="opt" rep="repeat">NAME</arg></command>
                </cmdsynopsis>
                <cmdsynopsis>
                        <command>systemd-install <arg choice="opt" rep="repeat">OPTIONS</arg> <arg choice="plain">disable</arg> <arg choice="opt" rep="repeat">NAME</arg></command>
                </cmdsynopsis>
                <cmdsynopsis>
                        <command>systemd-install <arg choice="opt" rep="repeat">OPTIONS</arg> <arg choice="plain">realize</arg> <arg choice="opt" rep="repeat">NAME</arg></command>
                </cmdsynopsis>
                <cmdsynopsis>
                        <command>systemd-install <arg choice="opt" rep="repeat">OPTIONS</arg> <arg choice="plain">test</arg> <arg choice="opt" rep="repeat">NAME</arg></command>
                </cmdsynopsis>
        </refsynopsisdiv>

        <refsect1>
                <title>Description</title>

                <para><command>systemd-install</command> enables or
                disables systemd units, or checks whether they are
                enabled, according to the installation suggestions
                included in the unit files.</para>

                <para>This command is useful to apply or undo the
                installation instructions encoded in the <literal>[Install]</literal>
                section of unit files. See
                <citerefentry><refentrytitle>systemd.unit</refentrytitle><manvolnum>5</manvolnum></citerefentry>
                for more information.</para>

                <para>Enabling units (as with <command>systemd-install
                enable</command>) should not be confused with
                activating units (as with <command>systemctl
                start</command>). The former simply installs the unit
                files in the configuration tree, but does not start
                them. The latter equals starting them, but does not
                necessarily require them to be enabled.</para>

                <para>Note that while
                <command>systemd-install</command> is the recommended
                tool to create or remove symlinks in the systemd
                configuration directory the administrator can also
                create links there manually, which is particularly
                useful to use configurations that deviate from the
                installation suggestions included in the unit
                files.</para>
        </refsect1>

        <refsect1>
                <title>Options</title>

                <para>The following options are understood:</para>

                <variablelist>
                        <varlistentry>
                                <term><option>--help</option></term>

                                <listitem><para>Prints a short help
                                text and exits.</para></listitem>
                        </varlistentry>

                        <varlistentry>
                                <term><option>--force</option></term>

                                <listitem><para>Enable/disable a
                                service even if it conflicts
                                with/contradicts another service. This
                                might have the effect of disabling
                                another service that was
                                enabled.</para></listitem>
                        </varlistentry>

                        <varlistentry>
                                <term><option>--system</option></term>

                                <listitem><para>Enable/disable a
                                system service.</para></listitem>
                        </varlistentry>

                        <varlistentry>
                                <term><option>--session</option></term>

                                <listitem><para>Enable/disable a
                                session service for the calling
                                user.</para></listitem>
                        </varlistentry>

                        <varlistentry>
                                <term><option>--global</option></term>

                                <listitem><para>Enable/disable a
                                session service for all
                                users.</para></listitem>
                        </varlistentry>

                        <varlistentry>
                                <term><option>--realize[=MODE]</option></term>

                                <listitem><para>After
                                enabling/disabling stop/restart/stop
                                the unit and reload manager
                                configuration. Optionally, takes one
                                of <option>no</option>,
                                <option>reload</option>,
                                <option>minimal</option>,
                                <option>maybe</option> or
                                <option>yes</option>. If
                                <option>no</option> is passed the
                                manager will not reload its
                                configuration and no service will be
                                started or stopped after
                                enabling/disabling of the unit
                                files. If <option>reload</option> is
                                passed the daemon configuration is
                                reloaded but the unit otherwise not
                                started/stopped/restarted. If
                                <option>minimal</option> is passed and
                                a unit is being enabled it will also
                                be restarted should it already be
                                running. If a unit is being disabled
                                it will be stopped should it be
                                running. In either case the daemon
                                configuration is
                                reloaded. <option>maybe</option> is
                                similar to this, but the unit will
                                also be started if it is being enabled
                                and any of the units listed in
                                <varname>WantedBy=</varname> in the
                                <literal>[Install]</literal> section
                                of the unit file is already
                                activated. Finally
                                <option>yes</option> starts the unit
                                unconditionally after enabling. This
                                setting defaults to
                                <option>no</option>. If
                                <option>--realize</option> is
                                specifieed but the mode value is
                                omitted defaults to
                                <option>maybe</option>. This option
                                has no effect when
                                <option>--global</option> or
                                <command>test</command> is used, or
                                when systemd is not running or the
                                command is executed in a
                                <citerefentry><refentrytitle>chroot</refentrytitle><manvolnum>2</manvolnum></citerefentry>
                                environment. This option is implied if
                                the <command>realize</command> command
                                is used.</para></listitem>
                        </varlistentry>

                        <varlistentry>
                                <term><option>--all</option></term>

                                <listitem><para>If set makes sure that
                                all symlinks on the specified unit are
                                removed from the configuration
                                directory and its subdirectories, not
                                just those specified in the
                                <literal>[Install]</literal>
                                section.</para></listitem>
                        </varlistentry>

                        <varlistentry>
                                <term><option>--verbose</option></term>
                                <term><option>-v</option></term>

                                <listitem><para>Show what is done as
                                it is done.</para></listitem>
                        </varlistentry>

                </variablelist>

                <para>The following commands are understood:</para>

                <variablelist>
                        <varlistentry>
                                <term><command>enable</command></term>

                                <listitem><para>Enable one or more
                                units. This will create a number of
                                symlinks as encoded in the
                                <literal>[Install]</literal> section
                                of a unit file.</para></listitem>
                        </varlistentry>

                        <varlistentry>
                                <term><command>disable</command></term>

                                <listitem><para>Disable or more
                                units. This will remove a number of
                                symlinks as encoded in the
                                <literal>[Install]</literal> section
                                of a unit file.</para></listitem>
                        </varlistentry>

                        <varlistentry>
                                <term><command>realize</command></term>

                                <listitem><para>Does not enable or
                                disable any unit. Checks whether any
                                of the units specified are enabled,
                                and then starts/stops/restarts the
                                units accordingly. This will check for
                                the existence of a number of symlinks
                                as encoded in the
                                <literal>[Install]</literal> section
                                of a unit file, and then executes the
                                action normally specified by
                                <option>--realize</option>. If
                                <option>--realize</option> is not
                                specified implies
                                <option>maybe</option> mode. To
                                override this mode specify
                                <option>--realize=</option> in
                                addition to
                                <command>realize</command>.</para></listitem>
                        </varlistentry>

                        <varlistentry>
                                <term><command>test</command></term>

                                <listitem><para>Does not enable or
                                disable any unit. Checks whether any
                                of the units specified are
                                enabled. This will check for the
                                existence of a number of symlinks as
                                encoded in the
                                <literal>[Install]</literal> section
                                of a unit file, and return with an
                                exit code of 0 if a unit is enabled, 1
                                otherwise.</para></listitem>
                        </varlistentry>

                </variablelist>

        </refsect1>

        <refsect1>
                <title>Exit status</title>

                <para>On success 0 is returned, a non-zero failure
                code otherwise.</para>
        </refsect1>

        <refsect1>
                <title>See Also</title>
                <para>
                        <citerefentry><refentrytitle>systemd</refentrytitle><manvolnum>1</manvolnum></citerefentry>,
                        <citerefentry><refentrytitle>systemctl</refentrytitle><manvolnum>1</manvolnum></citerefentry>,
                        <citerefentry><refentrytitle>systemd.unit</refentrytitle><manvolnum>5</manvolnum></citerefentry>
                </para>
        </refsect1>

</refentry>
